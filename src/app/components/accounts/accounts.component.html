<section class="accounts-section">
    <div class="container">
        <div class="top">
            <div class="top-left-col">
                <h2>Your Accounts</h2>
                <p class="total">Total Balance: <span>{{ totalBalance }}</span></p>
            </div>
            <div class="top-right-col">
                <input routerLink="/add-account"
                       type="button"
                       class="add-cta"
                       value="+ NEW">
            </div>
        </div>

        <div class="list-container">
            <div class="account-container"
                 *ngFor="let account of accounts">
                <app-account-view [account]="account"
                                  [areIconsVisible]="true"
                                  (onDelete)="deleteAccount(account)"
                                  (onEdit)="updateAccount(account)"></app-account-view>
            </div>
        </div>
    </div>
</section>

<!-- Edit Modal -->
<div class="modal fade"
     id="updateAccountModal"
     tabindex="-1"
     role="dialog"
     aria-labelledby="accountEditModalLabel"
     aria-hidden="true">
    <div class="modal-dialog"
         role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title"
                    id="updateAccountModalLabel">Edit account {{editAccount?.name}}</h5>
                <button type="button"
                        class="close"
                        data-dismiss="modal"
                        aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form #editForm="ngForm">
                    <div class="form-group">
                        <label for="name">Name</label>
                        <input type="text"
                               ngModel="{{editAccount?.name}}"
                               name="name"
                               class="form-control"
                               id="name"
                               aria-describedby="emailHelp">
                    </div>
                    <input type="hidden"
                           ngModel="{{editAccount?.id}}"
                           name="id"
                           class="form-control"
                           id="id">
                    <div class="form-group">
                        <label for="balance">Balance</label>
                        <input type="text"
                               ngModel="{{editAccount?.balance}}"
                               name="balance"
                               class="form-control"
                               id="balance">
                    </div>
                    <div class="form-group">
                        <select class="form-select"
                                aria-label="Account Type">
                            <option *ngFor="let accountType of accountTypes" value="{{accountType}}" selected="{{editAccount.accountType==accountType}}">
                                <img src="{{ accountType?.imageUrl }}">
                                <span>{{ accountType?.name }}</span>
                            </option>
                        </select>
                    </div>
                    <div class="modal-footer">
                        <button type="button"
                                data-dismiss="modal"
                                class="btn btn-secondary"
                                (click)="closeModal(editForm)">Close</button>
                        <button data-dismiss="modal"
                                class="btn btn-primary"
                                (click)="updateAccount(editAccount)">Save</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>